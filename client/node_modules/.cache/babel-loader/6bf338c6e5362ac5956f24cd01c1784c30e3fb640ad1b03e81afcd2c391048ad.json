{"ast":null,"code":"var _jsxFileName = \"/Users/tomomori/Documents/buhuiyonggou_code_house/NEU_Study/WebProject-Shelter-YangLi/client/src/AuthTokenContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useContext, useState, useEffect } from \"react\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthTokenContext = /*#__PURE__*/React.createContext();\nconst requestedScopes = [\"openid\", \"profile\", \"email\", \"read:user\", \"edit:user\", \"delete:user\", \"write:user\", \"read:puppy\", \"edit:puppy\", \"delete:puppy\", \"write:puppy\", \"read:application\", \"edit:application\", \"delete:application\", \"write:application\", \"read:adoption\", \"edit:adoption\", \"delete:adoption\", \"write:adoption\", \"read:favorite\", \"edit:favorite\", \"delete:favorite\", \"write:favorite\"];\nfunction AuthTokenProvider(_ref) {\n  _s();\n  let {\n    children\n  } = _ref;\n  const {\n    getAccessTokenSilently,\n    isAuthenticated\n  } = useAuth0();\n  const [accessToken, setAccessToken] = useState();\n  useEffect(() => {\n    const getAccessToken = async () => {\n      try {\n        const token = await getAccessTokenSilently({\n          authorizationParams: {\n            audience: process.env.REACT_APP_AUTH0_AUDIENCE,\n            scope: requestedScopes.join(' ')\n          }\n        });\n        setAccessToken(token);\n      } catch (err) {\n        console.log(err);\n      }\n    };\n    if (isAuthenticated) {\n      getAccessToken();\n    }\n  }, [getAccessTokenSilently, isAuthenticated]);\n  const value = {\n    accessToken,\n    setAccessToken\n  };\n  return /*#__PURE__*/_jsxDEV(AuthTokenContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n}\n_s(AuthTokenProvider, \"dWdvm8Rn0BAUsR36/g33e0tQgZc=\", false, function () {\n  return [useAuth0];\n});\n_c = AuthTokenProvider;\nconst useAuthToken = () => {\n  _s2();\n  return useContext(AuthTokenContext);\n};\n_s2(useAuthToken, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport { useAuthToken, AuthTokenProvider };\nvar _c;\n$RefreshReg$(_c, \"AuthTokenProvider\");","map":{"version":3,"names":["React","useContext","useState","useEffect","useAuth0","jsxDEV","_jsxDEV","AuthTokenContext","createContext","requestedScopes","AuthTokenProvider","_ref","_s","children","getAccessTokenSilently","isAuthenticated","accessToken","setAccessToken","getAccessToken","token","authorizationParams","audience","process","env","REACT_APP_AUTH0_AUDIENCE","scope","join","err","console","log","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","useAuthToken","_s2","$RefreshReg$"],"sources":["/Users/tomomori/Documents/buhuiyonggou_code_house/NEU_Study/WebProject-Shelter-YangLi/client/src/AuthTokenContext.js"],"sourcesContent":["import React, { useContext, useState, useEffect } from \"react\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\n\nconst AuthTokenContext = React.createContext();\n\nconst requestedScopes = [\n  \"openid\",\n  \"profile\",\n  \"email\",\n  \"read:user\",\n  \"edit:user\",\n  \"delete:user\",\n  \"write:user\",\n  \"read:puppy\",\n  \"edit:puppy\",\n  \"delete:puppy\",\n  \"write:puppy\",\n  \"read:application\",\n  \"edit:application\",\n  \"delete:application\",\n  \"write:application\",\n  \"read:adoption\",\n  \"edit:adoption\",\n  \"delete:adoption\",\n  \"write:adoption\",\n  \"read:favorite\",\n  \"edit:favorite\",\n  \"delete:favorite\",\n  \"write:favorite\",\n];\n\nfunction AuthTokenProvider({ children }) {\n  const { getAccessTokenSilently, isAuthenticated } = useAuth0();\n  const [accessToken, setAccessToken] = useState();\n\n  useEffect(() => {\n    const getAccessToken = async () => {\n      try {\n        const token = await getAccessTokenSilently({\n          authorizationParams: {\n            audience: process.env.REACT_APP_AUTH0_AUDIENCE,\n            scope: requestedScopes.join(' ')\n          },\n        });\n\n        setAccessToken(token);\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    if (isAuthenticated) {\n      getAccessToken();\n    }\n  }, [getAccessTokenSilently, isAuthenticated]);\n\n  const value = { accessToken, setAccessToken };\n  return (\n    <AuthTokenContext.Provider value={value}>\n      {children}\n    </AuthTokenContext.Provider>\n  );\n}\n\nconst useAuthToken = () => useContext(AuthTokenContext);\n\nexport { useAuthToken, AuthTokenProvider };\n"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,UAAU,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC9D,SAASC,QAAQ,QAAQ,oBAAoB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE9C,MAAMC,gBAAgB,gBAAGP,KAAK,CAACQ,aAAa,CAAC,CAAC;AAE9C,MAAMC,eAAe,GAAG,CACtB,QAAQ,EACR,SAAS,EACT,OAAO,EACP,WAAW,EACX,WAAW,EACX,aAAa,EACb,YAAY,EACZ,YAAY,EACZ,YAAY,EACZ,cAAc,EACd,aAAa,EACb,kBAAkB,EAClB,kBAAkB,EAClB,oBAAoB,EACpB,mBAAmB,EACnB,eAAe,EACf,eAAe,EACf,iBAAiB,EACjB,gBAAgB,EAChB,eAAe,EACf,eAAe,EACf,iBAAiB,EACjB,gBAAgB,CACjB;AAED,SAASC,iBAAiBA,CAAAC,IAAA,EAAe;EAAAC,EAAA;EAAA,IAAd;IAAEC;EAAS,CAAC,GAAAF,IAAA;EACrC,MAAM;IAAEG,sBAAsB;IAAEC;EAAgB,CAAC,GAAGX,QAAQ,CAAC,CAAC;EAC9D,MAAM,CAACY,WAAW,EAAEC,cAAc,CAAC,GAAGf,QAAQ,CAAC,CAAC;EAEhDC,SAAS,CAAC,MAAM;IACd,MAAMe,cAAc,GAAG,MAAAA,CAAA,KAAY;MACjC,IAAI;QACF,MAAMC,KAAK,GAAG,MAAML,sBAAsB,CAAC;UACzCM,mBAAmB,EAAE;YACnBC,QAAQ,EAAEC,OAAO,CAACC,GAAG,CAACC,wBAAwB;YAC9CC,KAAK,EAAEhB,eAAe,CAACiB,IAAI,CAAC,GAAG;UACjC;QACF,CAAC,CAAC;QAEFT,cAAc,CAACE,KAAK,CAAC;MACvB,CAAC,CAAC,OAAOQ,GAAG,EAAE;QACZC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;MAClB;IACF,CAAC;IAED,IAAIZ,eAAe,EAAE;MACnBG,cAAc,CAAC,CAAC;IAClB;EACF,CAAC,EAAE,CAACJ,sBAAsB,EAAEC,eAAe,CAAC,CAAC;EAE7C,MAAMe,KAAK,GAAG;IAAEd,WAAW;IAAEC;EAAe,CAAC;EAC7C,oBACEX,OAAA,CAACC,gBAAgB,CAACwB,QAAQ;IAACD,KAAK,EAAEA,KAAM;IAAAjB,QAAA,EACrCA;EAAQ;IAAAmB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACgB,CAAC;AAEhC;AAACvB,EAAA,CA/BQF,iBAAiB;EAAA,QAC4BN,QAAQ;AAAA;AAAAgC,EAAA,GADrD1B,iBAAiB;AAiC1B,MAAM2B,YAAY,GAAGA,CAAA;EAAAC,GAAA;EAAA,OAAMrC,UAAU,CAACM,gBAAgB,CAAC;AAAA;AAAC+B,GAAA,CAAlDD,YAAY;AAElB,SAASA,YAAY,EAAE3B,iBAAiB;AAAG,IAAA0B,EAAA;AAAAG,YAAA,CAAAH,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}